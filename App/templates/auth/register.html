<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Register - Isle Be There Caribbean</title>
    {% block styles %}
    {{ bootstrap.load_css() }}
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
    />
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='css/main.css') }}"
    />
    {% endblock %}
  </head>
  <body class="login-page-body">
    <div class="login-main-container">
      <div class="login-container">
        <div class="login-header">
          <h1><i class="fas fa-umbrella-beach me-2"></i>IsleBeThere</h1>
          <p>Welcome Guest! Please register here</p>
        </div>

        <div class="login-body">
          <!-- Flash Messages -->
          {% with messages = get_flashed_messages(with_categories=true) %} 
          {% if messages %} 
            {% for category, msg in messages %}
            <div class="alert alert-{{ category }} alert-dismissible fade show" role="alert">
              {{ msg }}
              <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
            </div>
            {% endfor %} 
          {% endif %} 
          {% endwith %}

          <!-- Form Errors -->
          {% if form.errors %}
          <div class="alert alert-danger alert-dismissible fade show" role="alert">
            <strong>Please correct the following errors:</strong>
            <ul class="mb-0 mt-2">
              {% for field, errors in form.errors.items() %}
                {% for error in errors %}
                  <li>{{ error }}</li>
                {% endfor %}
              {% endfor %}
            </ul>
            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
          </div>
          {% endif %}

          <form method="POST" action="{{ url_for('auth.register') }}">
            {{ form.hidden_tag() }}
            
            <div class="form-group mb-3">
              <label for="first_name" class="login-form-label">First Name</label>
              <div class="input-group">
                <span class="input-group-text login-input-group-text">
                  <i class="fas fa-user"></i>
                </span>
                {{ form.first_name(class="form-control login-form-control",
                placeholder="Enter your first name") }}
              </div>
            </div>

            <div class="form-group mb-3">
              <label for="last_name" class="login-form-label">Last Name</label>
              <div class="input-group">
                <span class="input-group-text login-input-group-text">
                  <i class="fas fa-user"></i>
                </span>
                {{ form.last_name(class="form-control login-form-control",
                placeholder="Enter your last name") }}
              </div>
            </div>

            <div class="form-group mb-3">
              <label for="email" class="login-form-label">Email</label>
              <div class="input-group">
                <span class="input-group-text login-input-group-text">
                  <i class="fas fa-envelope"></i>
                </span>
                {{ form.email(class="form-control login-form-control",
                placeholder="Enter your email") }}
              </div>
            </div>

            <div class="form-group mb-3">
              <label for="password" class="login-form-label">Password</label>
              <div class="input-group">
                <span class="input-group-text login-input-group-text">
                  <i class="fas fa-lock"></i>
                </span>
                {{ form.password(class="form-control login-form-control",
                placeholder="Enter your password") }}
              </div>
            </div>

            <div class="form-group mb-3">
              <label for="confirm_password" class="login-form-label">Confirm Password</label>
              <div class="input-group">
                <span class="input-group-text login-input-group-text">
                  <i class="fas fa-lock"></i>
                </span>
                {{ form.confirm_password(class="form-control login-form-control", 
                placeholder="Confirm your password") }}
              </div>
            </div>

            <div class="d-grid mb-3">
              <button type="submit" class="btn btn-login">
                Register Your Account
              </button>
            </div>
          </form>
        </div>

        <div class="login-footer">
          <p class="register">
            Already have an account?
            <a href="{{ url_for('auth.login') }}">Login here</a>
          </p>
          <p class="register">
            Are you a business owner?
            <a href="{{ url_for('auth.register_business') }}" class="register-here">
              Register your business</a>
          </p>
          <div class="text-center mt-3">
            <a href="{{ url_for('main.index') }}" class="btn btn-login btn-sm">
              <i class="fas fa-home me-1"></i>Back to Home
            </a>
          </div>
        </div>
      </div>
    </div>

    {% block scripts %}
    {{ bootstrap.load_js() }} 
    {% endblock %}
  </body>
</html>